<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Add New User</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
  <div class="container mt-5">
    <h2 class="mb-4 text-center">âœï¸ Chá»‰nh sá»­a ngÆ°á»i dÃ¹ng</h2>

    {% if error %}
      <div class="alert alert-danger" role="alert">
        {{ error }}
      </div>
    {% elif success %}
      <div class="alert alert-success" role="alert">
        {{ success }}
      </div>
    {% endif %}

    <form action="{{ url_for('edit_user', user_id=user.id) }}" method="POST" enctype="multipart/form-data" class="card p-4 shadow-sm">
      <div class="mb-3">
        <label for="name" class="form-label">TÃªn Ä‘áº§y Ä‘á»§</label>
        <input type="text" name="name" class="form-control" required value="{{ user.name }}">
      </div>

      <div class="mb-3">
        <label for="role" class="form-label">Vai trÃ²</label>
        <select name="role" class="form-select" required>
            <option value="user" {% if user.role == 'user' %}selected{% endif %}>ThÃ nh viÃªn</option>
            <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>Quáº£n trá»‹ viÃªn</option>
        </select>
      </div>

      <div class="mb-3" id="admin-username-field" style="display:none;">
        <label for="username" class="form-label">TÃªn Ä‘Äƒng nháº­p (cho quáº£n trá»‹ viÃªn)</label>
        <input type="text" name="username" class="form-control" value="{{ user.username or '' }}" id="username-input">
      </div>

      <!-- <div class="mb-3">
        <label for="face_images" class="form-label">áº¢nh khuÃ´n máº·t (CÃ³ thá»ƒ táº£i lÃªn nhiá»u áº£nh)</label>
        <input type="file" name="face_images" class="form-control" accept="image/*" multiple required>
        <div class="form-text">Vui lÃ²ng táº£i áº£nh khuÃ´n máº·t rÃµ rÃ ng</div>
      </div> -->

      <button type="submit" class="btn btn-primary w-100">ğŸ’¾ Cáº­p nháº­t thÃ´ng tin</button>
    </form>

    <div class="text-end mt-3">
      <a href="{{ url_for('index') }}" class="btn btn-primary">â—€ï¸ Quay láº¡i trang chá»§</a>
    </div>
  </div>

<script>
  document.querySelector('select[name="role"]').addEventListener('change', function() {
    const isAdmin = this.value === 'admin';
    document.getElementById('admin-username-field').style.display = isAdmin ? 'block' : 'none';
    document.getElementById('username-input').required = isAdmin;
  });
</script>

</body>
</html>
